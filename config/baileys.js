const _0x447502=_0x5d27;(function(_0x13dbfb,_0x381bf9){const _0x191ba4=_0x5d27,_0x404bbb=_0x13dbfb();while(!![]){try{const _0x4a7ad0=-parseInt(_0x191ba4(0xdd))/0x1*(-parseInt(_0x191ba4(0xe3))/0x2)+parseInt(_0x191ba4(0x106))/0x3+-parseInt(_0x191ba4(0x130))/0x4*(parseInt(_0x191ba4(0xa4))/0x5)+parseInt(_0x191ba4(0xf4))/0x6+parseInt(_0x191ba4(0xe0))/0x7+-parseInt(_0x191ba4(0x102))/0x8+parseInt(_0x191ba4(0x131))/0x9*(parseInt(_0x191ba4(0x13b))/0xa);if(_0x4a7ad0===_0x381bf9)break;else _0x404bbb['push'](_0x404bbb['shift']());}catch(_0x587fae){_0x404bbb['push'](_0x404bbb['shift']());}}}(_0x2107,0x7f68c));import _0x1aa093 from'node-cache';import{makeWASocket as _0x2198fb,makeCacheableSignalKeyStore,fetchLatestBaileysVersion,DEFAULT_CONNECTION_CONFIG}from'@nexustechpro/baileys';import{createFileStore,deleteFileStore,getFileStore}from'../whatsapp/index.js';import{logger}from'../utils/logger.js';import _0x53e62b from'pino';import{wrapBaileysSocket}from'../whatsapp/core/socket-wrapper.js';const makeWASocket=wrapBaileysSocket(_0x2198fb),baileysLogger=_0x53e62b({'level':process[_0x447502(0x107)][_0x447502(0x11f)]||_0x447502(0x11e)}),{version,isLatest}=await fetchLatestBaileysVersion(),groupCache=new _0x1aa093({'stdTTL':0x3c,'checkperiod':0x5,'useClones':![],'maxKeys':0x1f4}),msgRetryCounterCache=new _0x1aa093(),sessionLastActivity=new Map(),sessionLastMessage=new Map(),SESSION_CLEANUP_INTERVAL=0x3c*0x3e8,SESSION_INACTIVITY_TIMEOUT=0xa*0x3c*0x3e8,HEALTH_CHECK_TIMEOUT=0x1e*0x3c*0x3e8;export const baileysConfig={...DEFAULT_CONNECTION_CONFIG,'version':version,'logger':baileysLogger,'generateHighQualityLinkPreview':!![]};export function getBaileysConfig(){return{...baileysConfig};}export const eventTypes=['messages.upsert',_0x447502(0x129),_0x447502(0xee),'messages.update','contacts.update',_0x447502(0x13e),'lid-mapping.update'];export async function createSessionStore(_0xe40c37){const _0x2d425d=_0x447502,_0x37d961=createFileStore(_0xe40c37);return sessionLastActivity[_0x2d425d(0x137)](_0xe40c37,Date['now']()),sessionLastMessage[_0x2d425d(0x137)](_0xe40c37,Date['now']()),logger[_0x2d425d(0xcb)](_0x2d425d(0xa5)+_0xe40c37),_0x37d961;}export function getSessionStore(_0x92fd1f){const _0x14eba7=_0x447502;sessionLastActivity[_0x14eba7(0x137)](_0x92fd1f,Date[_0x14eba7(0xfd)]());const _0x292938=getFileStore(_0x92fd1f);if(_0x292938)return logger[_0x14eba7(0xcb)](_0x14eba7(0xef)+_0x92fd1f),_0x292938;return createSessionStore(_0x92fd1f);}export async function deleteSessionStore(_0x32dd11){const _0x1da36f=_0x447502;return sessionLastActivity[_0x1da36f(0xa9)](_0x32dd11),sessionLastMessage[_0x1da36f(0xa9)](_0x32dd11),await deleteFileStore(_0x32dd11),logger[_0x1da36f(0xcb)](_0x1da36f(0xd2)+_0x32dd11),!![];}export function updateSessionLastMessage(_0x2d96e8){const _0x1e39b7=_0x447502;sessionLastMessage[_0x1e39b7(0x137)](_0x2d96e8,Date['now']());}export function ensureCacheableKeys(_0x2b9809){const _0x4023e0=_0x447502;if(!_0x2b9809||!_0x2b9809[_0x4023e0(0x115)])return _0x2b9809;const _0x2d28de=typeof _0x2b9809[_0x4023e0(0x115)]['get']==='function'&&typeof _0x2b9809[_0x4023e0(0x115)][_0x4023e0(0x137)]===_0x4023e0(0xec);return!_0x2d28de&&(logger['warn'](_0x4023e0(0x94)),_0x2b9809[_0x4023e0(0x115)]=makeCacheableSignalKeyStore(_0x2b9809['keys'],_0x53e62b({'level':_0x4023e0(0x11e)}))),_0x2b9809;}const DECRYPTION_ERROR_PATTERNS=[_0x447502(0x12b),_0x447502(0x90),_0x447502(0x117),_0x447502(0xbb),_0x447502(0xf9),_0x447502(0x113),'libsignal',_0x447502(0x9e),_0x447502(0x132),'currentRatchet','ephemeralKeyPair',_0x447502(0x13c),'pendingPreKey',_0x447502(0x98),_0x447502(0xe2),_0x447502(0xbd),'privKey','lastRemoteEphemeralKey',_0x447502(0xc8),_0x447502(0x101),_0x447502(0xdc),_0x447502(0x10c),'preKeyId',_0x447502(0x111),_0x447502(0x96),_0x447502(0xe8),'used:','created:',_0x447502(0xad),_0x447502(0xb9),_0x447502(0x133)];function isEncryptionError(_0x2e6710){const _0x57f3d2=_0x447502;if(!_0x2e6710)return![];const _0x1c4e13=_0x2e6710[_0x57f3d2(0xb5)]||_0x2e6710[_0x57f3d2(0xf7)]()||'',_0x4e3519=_0x2e6710[_0x57f3d2(0xe7)]||'',_0x581e70=(_0x1c4e13+'\x20'+_0x4e3519)[_0x57f3d2(0x134)]();return DECRYPTION_ERROR_PATTERNS[_0x57f3d2(0xcd)](_0x3eafe5=>_0x581e70[_0x57f3d2(0xa1)](_0x3eafe5['toLowerCase']()));}function _0x2107(){const _0x2d4cb0=['toFixed','silent','BAILEYS_LOG_LEVEL','rate-overlimit','getPNForLID','\x20inactive\x20sessions','remoteJid','participants','[Cache]\x20Error\x20setting\x20up\x20cache\x20invalidation:','\x20-\x20refreshing\x20','superadmin','length','groups.update','signalRepository','decrypt','[Cache]\x20Flushed\x20group\x20cache\x20(was\x20','[LID]\x20Error\x20getting\x20PN\x20for\x20LID:','connectionCallbacks','Failed\x20to\x20setup\x20socket\x20defaults:','16zppNqU','513GTmwkc','registrationId','<Buffer','toLowerCase','[Cache]\x20Error\x20updating\x20participants:','getLIDForPN','set','messages','[Cache]\x20Cleared\x20','\x20-\x20invalidating\x20','16370rVKKWc','indexInfo','newsletterMetadata','call','jid','filter','user','[Store]\x20Error\x20binding\x20store\x20for\x20','[LID]\x20Batch\x20resolved\x20','group_','[LID]\x20Cannot\x20extract\x20phone\x20from\x20LID\x20','[Cache]\x20Manually\x20updated\x20group\x20cache\x20for\x20','Could\x20not\x20find','[Cache]\x20LID\x20mapping\x20listener\x20already\x20exists\x20or\x20failed\x20to\x20add:\x20','[LID]\x20Resolved\x20LID\x20to\x20PN:\x20','admin','Auth\x20keys\x20not\x20properly\x20wrapped,\x20fixing...','promote','chainType','[LID]\x20Error\x20extracting\x20phone\x20from\x20JID:','baseKey','[Newsletter]\x20Successfully\x20followed:\x20','output','getPnForLid','hits','[Cache]\x20Returning\x20cached\x20metadata\x20for\x20','_chains','[Cache]\x20Participant\x20','\x20(reason:\x20','includes','\x20PNs\x20to\x20LIDs','restrict','659650qUhYQZ','[Store]\x20Created\x20file-based\x20store\x20for\x20','[Store]\x20Bound\x20file-based\x20store\x20to\x20socket\x20for\x20','announce','warn','delete','flushAll','forbidden','\x20-\x20Bot\x20not\x20in\x20group\x20or\x20was\x20removed','closed:','eventHandlersSetup','[Baileys]\x20Error\x20fetching\x20group\x20metadata\x20for\x20','[Baileys]\x20Error\x20checking\x20admin\x20status:','[Newsletter]\x20Socket\x20doesn\x27t\x20have\x20newsletterFollow\x20method\x20(old\x20Baileys\x20version?)','isArray','lidMapping','statusCode','message','update','[Cache]\x20Invalidated\x20cache\x20for\x20','get','Closing','\x20keys)','SessionEntry','Encryption\x20error\x20for\x20','pubKey','size','[Baileys]\x20Error\x20checking\x20bot\x20admin\x20status:','[Cache]\x20Error\x20clearing\x20all\x20cache:','getStats','lid-mapping.update','emit','[LID]\x20Error\x20batch\x20resolving\x20PNs:','[Cache]\x20Error\x20updating\x20from\x20event:','error','[Cache]\x20Cached\x20fresh\x20metadata\x20for\x20','previousCounter','newsletterFollow','[Cache]\x20Updated\x20cache\x20from\x20event\x20for\x20','debug','manual_clear','some','[LID]\x20Error\x20getting\x20LID\x20for\x20PN:','demote','[Event]\x20Group\x20update:\x20','split','[Store]\x20Cleaned\x20up\x20file\x20store\x20for\x20','[Newsletter]\x20Error\x20checking\x20follow\x20status\x20for\x20','[Event]\x20LID\x20mapping\x20update\x20received:','_originalGroupMetadata','forEach','Failed\x20to\x20create\x20Baileys\x20socket:','loadMessage','update_error','info','sendRetryRequest','baseKeyType','2481PoFJlK','startsWith','string','5397882emAsaD','[Newsletter]\x20Socket\x20doesn\x27t\x20have\x20newsletterMetadata\x20method','remoteIdentityKey','340OSiEbw','[Cache]\x20Error\x20getting\x20cache\x20stats:','@s.whatsapp.net','key','stack','messageKeys','@lid','settings_change','setMaxListeners','function','[JID]\x20Error\x20cleaning\x20JID:','group-participants.update','[Store]\x20Retrieved\x20existing\x20store\x20for\x20','\x20-\x20use\x20signal\x20repository','Retry\x20request\x20failed:\x20','entries','[Newsletter]\x20Error\x20getting\x20newsletters:','2501952kICaOO','getMessage','\x20->\x20','toString','[LID]\x20Could\x20not\x20resolve\x20LID\x20for\x20','Bad\x20MAC','groupMetadataRefresh','\x20on\x20','Requesting\x20retry\x20for\x20message\x20','now','[Event]\x20Group\x20participants\x20','[LID]\x20Resolved\x20PN\x20to\x20LID:\x20','[Baileys]\x20Fetching\x20fresh\x20metadata\x20for\x20','rootKey','5522664OfZQBO','[Baileys]\x20Explicit\x20refresh\x20requested\x20for\x20','[Store]\x20Cleaned\x20up\x20','[Baileys]\x20Rate\x20limited\x20for\x20','110172ACCCMR','env','[Newsletter]\x20Error\x20getting\x20metadata\x20for\x20','[Cache]\x20Setup\x20group\x20cache\x20invalidation\x20listeners','getLIDsForPNs','misses','signedKeyId','map','[Cache]\x20Error\x20updating\x20group\x20cache:','Unknown\x20Group\x20(Rate\x20Limited)','phoneNumber','chainKey','[LID]\x20Invalid\x20LID\x20format:\x20','session_cipher','[LID]\x20Invalid\x20phone\x20number\x20format:\x20','keys','[Store]\x20Session\x20cleanup\x20interval\x20started','message\x20key','groupMetadata','\x20group\x20cache\x20entries','del','endsWith','bind'];_0x2107=function(){return _0x2d4cb0;};return _0x2107();}export function wrapSocketForDecryptionErrors(_0x40bd8b,_0x285f3a){const _0x5cc37d=_0x447502,_0x5baeda=_0x40bd8b['ev'][_0x5cc37d(0xc3)][_0x5cc37d(0x11c)](_0x40bd8b['ev']);return _0x40bd8b['ev'][_0x5cc37d(0xc3)]=(_0x4567a5,..._0x13684a)=>{const _0x2630cd=_0x5cc37d;try{return _0x5baeda(_0x4567a5,..._0x13684a);}catch(_0x590aa8){if(isEncryptionError(_0x590aa8)){logger[_0x2630cd(0xa8)](_0x2630cd(0xbc)+_0x285f3a+_0x2630cd(0xfb)+_0x4567a5+':',_0x590aa8[_0x2630cd(0xb5)]);if(_0x4567a5==='messages.upsert'&&_0x13684a[0x0]?.[_0x2630cd(0x138)]){const _0x3e46fa=_0x13684a[0x0][_0x2630cd(0x138)][0x0];_0x3e46fa?.['key']&&_0x40bd8b['sendRetryRequest']&&(logger['info'](_0x2630cd(0xfc)+_0x3e46fa[_0x2630cd(0xe6)]['id']),_0x40bd8b[_0x2630cd(0xdb)](_0x3e46fa[_0x2630cd(0xe6)])['catch'](_0x5b89fb=>logger[_0x2630cd(0xcb)](_0x2630cd(0xf1)+_0x5b89fb['message'])));}return;}throw _0x590aa8;}},_0x40bd8b;}export function needsHealthCheck(_0x46bd04){const _0x17d5c9=_0x447502,_0x59214f=sessionLastMessage[_0x17d5c9(0xb8)](_0x46bd04);if(!_0x59214f)return![];return Date[_0x17d5c9(0xfd)]()-_0x59214f>HEALTH_CHECK_TIMEOUT;}function _0x5d27(_0x5552c8,_0x34e71e){_0x5552c8=_0x5552c8-0x8b;const _0x2107e0=_0x2107();let _0x5d2730=_0x2107e0[_0x5552c8];return _0x5d2730;}export function getSessionsNeedingHealthCheck(){const _0x2abb79=_0x447502,_0x4b588c=[],_0x3ad33c=Date[_0x2abb79(0xfd)]();for(const [_0x2753e3,_0x57fe0e]of sessionLastMessage[_0x2abb79(0xf2)]()){_0x3ad33c-_0x57fe0e>HEALTH_CHECK_TIMEOUT&&_0x4b588c['push'](_0x2753e3);}return _0x4b588c;}export function startSessionCleanup(){const _0x4a92ee=_0x447502;setInterval(()=>{const _0x457b35=_0x5d27,_0x3f4cd5=Date['now']();let _0x41d38a=0x0;for(const [_0x4dfdb8,_0x2dd9b9]of sessionLastActivity['entries']()){_0x3f4cd5-_0x2dd9b9>SESSION_INACTIVITY_TIMEOUT&&(sessionLastActivity['delete'](_0x4dfdb8),_0x41d38a++);}const _0xe2c8cc=groupCache['getStats']();_0xe2c8cc[_0x457b35(0x115)]>0x12c&&(groupCache[_0x457b35(0xaa)](),logger[_0x457b35(0xda)](_0x457b35(0x12c)+_0xe2c8cc['keys']+_0x457b35(0xba))),_0x41d38a>0x0&&logger[_0x457b35(0xda)](_0x457b35(0x104)+_0x41d38a+_0x457b35(0x122));},SESSION_CLEANUP_INTERVAL),logger[_0x4a92ee(0xda)](_0x4a92ee(0x116));}export function getSessionStoreStats(){const _0x4f77fc=_0x447502;return{'activeTrackers':sessionLastActivity['size'],'groupCacheKeys':groupCache[_0x4f77fc(0xc1)]()[_0x4f77fc(0x115)],'sessionsTracked':sessionLastMessage['size']};}const normalizeJid=_0x465b47=>{const _0x283d17=_0x447502;if(!_0x465b47)return null;if(_0x465b47[_0x283d17(0x11b)](_0x283d17(0xe9)))return _0x465b47;if(_0x465b47[_0x283d17(0xa1)]('@'))return _0x465b47;return _0x465b47[_0x283d17(0xd1)]('@')[0x0]+'@s.whatsapp.net';},getParticipantJid=_0x36e976=>{const _0x44abb5=_0x447502;if(!_0x36e976)return null;if(_0x36e976[_0x44abb5(0x13f)])return normalizeJid(_0x36e976[_0x44abb5(0x13f)]);if(_0x36e976[_0x44abb5(0x110)])return normalizeJid(_0x36e976[_0x44abb5(0x110)]);if(_0x36e976['id']&&!_0x36e976['id'][_0x44abb5(0x11b)]('@lid'))return normalizeJid(_0x36e976['id']);if(_0x36e976['id'])return _0x36e976['id'];return null;},getParticipantPhoneNumber=_0x6524de=>{const _0x459b3c=_0x447502;if(!_0x6524de)return null;if(_0x6524de['phoneNumber'])return normalizeJid(_0x6524de[_0x459b3c(0x110)]);if(_0x6524de[_0x459b3c(0x13f)]&&_0x6524de[_0x459b3c(0x13f)][_0x459b3c(0x11b)](_0x459b3c(0xe5)))return normalizeJid(_0x6524de['jid']);if(_0x6524de['id']&&!_0x6524de['id']['endsWith'](_0x459b3c(0xe9)))return normalizeJid(_0x6524de['id']);return null;},normalizeParticipantData=_0x59f9ec=>{const _0x53723f=_0x447502;if(!_0x59f9ec)return null;const _0xbfc4d2=getParticipantJid(_0x59f9ec),_0x5011ff=getParticipantPhoneNumber(_0x59f9ec);return(!_0x59f9ec[_0x53723f(0x13f)]||_0x59f9ec[_0x53723f(0x13f)]==='')&&(_0x59f9ec['jid']=_0xbfc4d2),(!_0x59f9ec[_0x53723f(0x110)]||_0x59f9ec[_0x53723f(0x110)]==='')&&(_0x59f9ec[_0x53723f(0x110)]=_0x5011ff),!_0x59f9ec['id']&&(_0x59f9ec['id']=_0xbfc4d2),_0x59f9ec;},normalizeMetadata=_0x1af90a=>{const _0x5355f2=_0x447502;if(!_0x1af90a)return null;return _0x1af90a[_0x5355f2(0x124)]&&Array['isArray'](_0x1af90a[_0x5355f2(0x124)])&&(_0x1af90a[_0x5355f2(0x124)]=_0x1af90a[_0x5355f2(0x124)][_0x5355f2(0x10d)](_0x28a529=>normalizeParticipantData(_0x28a529))[_0x5355f2(0x140)](Boolean)),_0x1af90a;};export function createBaileysSocket(_0x29f561,_0xab6c3e,_0x5ea9d2=null){const _0x1ae9f2=_0x447502;try{const _0x1cd59b=makeWASocket({...baileysConfig,'auth':_0x29f561,'sessionId':_0xab6c3e,'getMessage':_0x5ea9d2||null,'msgRetryCounterCache':msgRetryCounterCache});return setupSocketDefaults(_0x1cd59b),_0x1cd59b;}catch(_0x4658c1){logger[_0x1ae9f2(0xc6)](_0x1ae9f2(0xd7),_0x4658c1);throw _0x4658c1;}}export function setupSocketDefaults(_0x1d89a9){const _0x38090f=_0x447502;try{_0x1d89a9['ev']&&typeof _0x1d89a9['ev'][_0x38090f(0xeb)]===_0x38090f(0xec)&&_0x1d89a9['ev'][_0x38090f(0xeb)](0x5dc),_0x1d89a9['sessionId']=null,_0x1d89a9[_0x38090f(0xae)]=![],_0x1d89a9[_0x38090f(0x12e)]=null,logger['debug']('Socket\x20defaults\x20configured\x20(maxListeners:\x201500)');}catch(_0x1cc648){logger[_0x38090f(0xc6)](_0x38090f(0x12f),_0x1cc648);}}export const getGroupMetadata=async(_0x43f8eb,_0x14527c,_0x445be9=![])=>{const _0x17c3d1=_0x447502,_0x62bd4b=_0x17c3d1(0x8d)+_0x14527c;try{if(!_0x445be9){const _0x55c2eb=groupCache['get'](_0x62bd4b);if(_0x55c2eb)return logger[_0x17c3d1(0xcb)](_0x17c3d1(0x9d)+_0x14527c),normalizeMetadata(_0x55c2eb);}_0x445be9&&(groupCache[_0x17c3d1(0x11a)](_0x62bd4b),logger[_0x17c3d1(0xcb)]('[Cache]\x20Force\x20refresh\x20-\x20cleared\x20cache\x20for\x20'+_0x14527c));logger[_0x17c3d1(0xcb)](_0x17c3d1(0x100)+_0x14527c);const _0x3fe61e=_0x43f8eb[_0x17c3d1(0xd5)]||_0x43f8eb[_0x17c3d1(0x118)];let _0x81ee2d=await _0x3fe61e(_0x14527c);return _0x81ee2d=normalizeMetadata(_0x81ee2d),groupCache['set'](_0x62bd4b,_0x81ee2d,0x3c),logger[_0x17c3d1(0xcb)](_0x17c3d1(0xc7)+_0x14527c),_0x81ee2d;}catch(_0x7c739d){if(_0x7c739d[_0x17c3d1(0x9a)]?.[_0x17c3d1(0xb4)]===0x193||_0x7c739d['data']===0x193||_0x7c739d[_0x17c3d1(0xb5)]?.[_0x17c3d1(0xa1)](_0x17c3d1(0xab)))return logger[_0x17c3d1(0xa8)]('[Baileys]\x20403\x20Forbidden\x20for\x20'+_0x14527c+_0x17c3d1(0xac)),groupCache[_0x17c3d1(0x11a)](_0x62bd4b),null;if(_0x7c739d['message']?.['includes'](_0x17c3d1(0x120))||_0x7c739d[_0x17c3d1(0x9a)]?.[_0x17c3d1(0xb4)]===0x1f7){const _0x5402e0=groupCache['get'](_0x62bd4b);if(_0x5402e0)return logger[_0x17c3d1(0xa8)](_0x17c3d1(0x105)+_0x14527c+',\x20returning\x20cached\x20data'),normalizeMetadata(_0x5402e0);return logger['error'](_0x17c3d1(0x105)+_0x14527c+'\x20and\x20no\x20cache\x20available'),{'id':_0x14527c,'subject':_0x17c3d1(0x10f),'participants':[],'creation':Date[_0x17c3d1(0xfd)](),'owner':null,'desc':null,'announce':![],'restrict':![]};}logger[_0x17c3d1(0xc6)](_0x17c3d1(0xaf)+_0x14527c+':',_0x7c739d[_0x17c3d1(0xb5)]);throw _0x7c739d;}};export const refreshGroupMetadata=async(_0x5791a2,_0x3c62b5)=>{const _0x4e75d4=_0x447502;return logger['debug'](_0x4e75d4(0x103)+_0x3c62b5),await getGroupMetadata(_0x5791a2,_0x3c62b5,!![]);};export const updateCacheFromEvent=(_0x249e9d,_0x3d793e)=>{const _0x2e7168=_0x447502;try{const _0x47eff8=_0x2e7168(0x8d)+_0x249e9d,_0x4ac893=groupCache[_0x2e7168(0xb8)](_0x47eff8);if(_0x4ac893){const _0x1713e5={..._0x4ac893,..._0x3d793e},_0x2a7acb=normalizeMetadata(_0x1713e5);return groupCache[_0x2e7168(0x137)](_0x47eff8,_0x2a7acb,0x3c),logger[_0x2e7168(0xcb)](_0x2e7168(0xca)+_0x249e9d),!![];}return![];}catch(_0x1b8cac){return logger['error'](_0x2e7168(0xc5),_0x1b8cac[_0x2e7168(0xb5)]),![];}};export const updateParticipantsInCache=async(_0x2b89b0,_0x1bb472,_0x382e42)=>{const _0x47aa54=_0x447502;try{const {action:_0x2a06fc}=_0x382e42;if(['add','remove',_0x47aa54(0x95),_0x47aa54(0xcf)][_0x47aa54(0xa1)](_0x2a06fc)){logger[_0x47aa54(0xcb)](_0x47aa54(0x9f)+_0x2a06fc+_0x47aa54(0x126)+_0x1bb472),await _0x2b89b0[_0x47aa54(0xfa)](_0x1bb472);return;}logger[_0x47aa54(0xcb)](_0x47aa54(0x9f)+_0x2a06fc+_0x47aa54(0x13a)+_0x1bb472),invalidateGroupCache(_0x1bb472,'participant_'+_0x2a06fc);}catch(_0x58ee2d){logger[_0x47aa54(0xc6)](_0x47aa54(0x135),_0x58ee2d[_0x47aa54(0xb5)]),invalidateGroupCache(_0x1bb472,_0x47aa54(0xd9));}};export const invalidateGroupCache=(_0x193c83,_0x436b4a=_0x447502(0xb6))=>{const _0x104ad1=_0x447502,_0x2aa505=_0x104ad1(0x8d)+_0x193c83;if(groupCache['has'](_0x2aa505))return groupCache['del'](_0x2aa505),logger[_0x104ad1(0xcb)](_0x104ad1(0xb7)+_0x193c83+_0x104ad1(0xa0)+_0x436b4a+')'),!![];return![];};export const isUserGroupAdmin=async(_0xdebb6d,_0x1e7e41,_0x36c9ce)=>{const _0xe9ff70=_0x447502;try{const _0x53548f=await getGroupMetadata(_0xdebb6d,_0x1e7e41);if(!_0x53548f||!_0x53548f[_0xe9ff70(0x124)])return logger[_0xe9ff70(0xa8)]('[Baileys]\x20Cannot\x20check\x20admin\x20-\x20bot\x20not\x20in\x20group\x20'+_0x1e7e41),![];const _0x2219a7=normalizeJid(_0x36c9ce);if(!_0x2219a7)return![];let _0x2f88d4=_0x36c9ce;if(_0x36c9ce[_0xe9ff70(0x11b)](_0xe9ff70(0xe9))&&_0xdebb6d[_0xe9ff70(0x9b)])try{_0x2f88d4=await _0xdebb6d[_0xe9ff70(0x9b)](_0x36c9ce);}catch(_0x226474){logger[_0xe9ff70(0xcb)]('[Baileys]\x20Could\x20not\x20resolve\x20LID\x20'+_0x36c9ce);}return _0x53548f['participants'][_0xe9ff70(0xcd)](_0x5d49fd=>{const _0xd094e4=_0xe9ff70,_0x4ebdcf=getParticipantJid(_0x5d49fd),_0x138fa0=getParticipantPhoneNumber(_0x5d49fd),_0x36349b=_0x5d49fd['id']||_0x4ebdcf;if(!_0x4ebdcf)return![];const _0x47b1db=normalizeJid(_0x4ebdcf),_0x108d40=normalizeJid(_0x36349b),_0x4a98ec=_0x138fa0?normalizeJid(_0x138fa0):null,_0x5255bc=_0x47b1db===_0x2219a7||_0x47b1db===normalizeJid(_0x2f88d4)||_0x108d40===_0x2219a7||_0x108d40===normalizeJid(_0x2f88d4)||_0x4a98ec&&_0x4a98ec===_0x2219a7||_0x4a98ec&&_0x4a98ec===normalizeJid(_0x2f88d4);return _0x5255bc&&[_0xd094e4(0x93),_0xd094e4(0x127)]['includes'](_0x5d49fd[_0xd094e4(0x93)]);});}catch(_0x559ab9){return logger['error'](_0xe9ff70(0xb0),_0x559ab9[_0xe9ff70(0xb5)]),![];}};export const isBotGroupAdmin=async(_0x3617ce,_0x1abe46)=>{const _0x2a0e76=_0x447502;try{if(!_0x3617ce[_0x2a0e76(0x141)]?.['id'])return logger[_0x2a0e76(0xa8)]('[Baileys]\x20Bot\x20user\x20ID\x20not\x20available'),![];const _0x3d22ee=normalizeJid(_0x3617ce['user']['id']);return await isUserGroupAdmin(_0x3617ce,_0x1abe46,_0x3d22ee);}catch(_0x5b2603){return logger[_0x2a0e76(0xc6)](_0x2a0e76(0xbf),_0x5b2603[_0x2a0e76(0xb5)]),![];}};export const setupCacheInvalidation=_0x5e9568=>{const _0xa75a2e=_0x447502;try{_0x5e9568['ev']['on'](_0xa75a2e(0xee),async _0x3afabe=>{const _0x47cf0c=_0xa75a2e,{id:_0x444f68,participants:_0x411aab,action:_0x52a9fb}=_0x3afabe;logger['debug'](_0x47cf0c(0xfe)+_0x52a9fb+':\x20'+_0x444f68),['add','remove','promote','demote'][_0x47cf0c(0xa1)](_0x52a9fb)&&await updateParticipantsInCache(_0x5e9568,_0x444f68,_0x3afabe);}),_0x5e9568['ev']['on'](_0xa75a2e(0x129),_0x2460ee=>{const _0x58f2cd=_0xa75a2e;_0x2460ee[_0x58f2cd(0xd6)](_0x17fb1f=>{const _0x1354d8=_0x58f2cd;if(_0x17fb1f['id']){logger[_0x1354d8(0xcb)](_0x1354d8(0xd0)+_0x17fb1f['id']);if(_0x17fb1f[_0x1354d8(0xa7)]!==undefined||_0x17fb1f[_0x1354d8(0xa3)]!==undefined)invalidateGroupCache(_0x17fb1f['id'],_0x1354d8(0xea));else Object[_0x1354d8(0x115)](_0x17fb1f)[_0x1354d8(0x128)]>0x1&&updateCacheFromEvent(_0x17fb1f['id'],_0x17fb1f);}});});try{_0x5e9568['ev']['on'](_0xa75a2e(0xc2),_0xc30b1c=>{const _0x595600=_0xa75a2e;logger[_0x595600(0xcb)](_0x595600(0xd4),_0xc30b1c);});}catch(_0x19a3a6){logger[_0xa75a2e(0xcb)](_0xa75a2e(0x91)+_0x19a3a6[_0xa75a2e(0xb5)]);}logger[_0xa75a2e(0xda)](_0xa75a2e(0x109));}catch(_0x13fb7d){logger[_0xa75a2e(0xc6)](_0xa75a2e(0x125),_0x13fb7d[_0xa75a2e(0xb5)]);}};export const updateGroupCache=(_0x50c65e,_0x4cd757)=>{const _0x317182=_0x447502;try{const _0x1922f4=_0x317182(0x8d)+_0x50c65e,_0x39d315=normalizeMetadata(_0x4cd757);return groupCache[_0x317182(0x137)](_0x1922f4,_0x39d315,0x3c),logger['debug'](_0x317182(0x8f)+_0x50c65e),!![];}catch(_0x3e0ec6){return logger['error'](_0x317182(0x10e),_0x3e0ec6[_0x317182(0xb5)]),![];}};export const getGroupCache=_0x52af02=>{const _0x59cfe6=_0x447502,_0x288bbd=_0x59cfe6(0x8d)+_0x52af02,_0xde834e=groupCache[_0x59cfe6(0xb8)](_0x288bbd);return _0xde834e?normalizeMetadata(_0xde834e):null;};export const clearGroupCache=_0x1f65fa=>{const _0x15fd46=_0x447502;return invalidateGroupCache(_0x1f65fa,_0x15fd46(0xcc));};export const clearAllGroupCache=()=>{const _0x3c2676=_0x447502;try{const _0x5af99d=groupCache[_0x3c2676(0x115)]()['filter'](_0x57b12e=>_0x57b12e[_0x3c2676(0xde)](_0x3c2676(0x8d)));return _0x5af99d[_0x3c2676(0xd6)](_0x2e7605=>groupCache[_0x3c2676(0x11a)](_0x2e7605)),logger[_0x3c2676(0xda)](_0x3c2676(0x139)+_0x5af99d[_0x3c2676(0x128)]+_0x3c2676(0x119)),_0x5af99d['length'];}catch(_0x12cacf){return logger[_0x3c2676(0xc6)](_0x3c2676(0xc0),_0x12cacf[_0x3c2676(0xb5)]),0x0;}};export const getCacheStats=()=>{const _0x214190=_0x447502;try{const _0x1eb641=groupCache['getStats'](),_0x546902=groupCache[_0x214190(0x115)]()[_0x214190(0x140)](_0x34936f=>_0x34936f[_0x214190(0xde)](_0x214190(0x8d)));return{'keys':_0x1eb641[_0x214190(0x115)],'hits':_0x1eb641[_0x214190(0x9c)],'misses':_0x1eb641['misses'],'hitRate':_0x1eb641[_0x214190(0x9c)]>0x0?(_0x1eb641[_0x214190(0x9c)]/(_0x1eb641[_0x214190(0x9c)]+_0x1eb641[_0x214190(0x10b)])*0x64)[_0x214190(0x11d)](0x2)+'%':'0%','groups':_0x546902[_0x214190(0x128)],'groupKeys':_0x546902,'activeTrackers':sessionLastActivity[_0x214190(0xbe)]};}catch(_0x356e94){return logger['error'](_0x214190(0xe4),_0x356e94[_0x214190(0xb5)]),null;}};export async function bindStoreToSocket(_0x50060e,_0x503c72){const _0x4c98b3=_0x447502;try{const _0x55672a=await getSessionStore(_0x503c72);if(!_0x55672a||typeof _0x55672a[_0x4c98b3(0x11c)]!==_0x4c98b3(0xec))return logger['error']('[Store]\x20Invalid\x20store\x20object\x20for\x20'+_0x503c72),null;return _0x55672a[_0x4c98b3(0x11c)](_0x50060e['ev']),_0x50060e[_0x4c98b3(0xf5)]=async _0x483328=>{const _0x583af9=_0x4c98b3;try{const _0x193128=await _0x55672a[_0x583af9(0xd8)](_0x483328[_0x583af9(0x123)],_0x483328['id']);return _0x193128?.[_0x583af9(0xb5)]||undefined;}catch{return undefined;}},logger[_0x4c98b3(0xcb)](_0x4c98b3(0xa6)+_0x503c72),_0x55672a;}catch(_0x1c87b1){return logger[_0x4c98b3(0xc6)](_0x4c98b3(0x8b)+_0x503c72+':',_0x1c87b1[_0x4c98b3(0xb5)]),null;}}export async function followNewsletter(_0x2c11d0,_0x2b2e4c){const _0x253ed1=_0x447502;try{if(!_0x2c11d0[_0x253ed1(0xc9)])return logger[_0x253ed1(0xa8)](_0x253ed1(0xb1)),![];const _0x387e61=await _0x2c11d0[_0x253ed1(0xc9)](_0x2b2e4c);return logger[_0x253ed1(0xda)](_0x253ed1(0x99)+_0x2b2e4c),_0x387e61;}catch(_0xf656a5){return logger['error']('[Newsletter]\x20Error\x20following\x20'+_0x2b2e4c+':',_0xf656a5[_0x253ed1(0xb5)]),null;}}export async function isFollowingNewsletter(_0x18d107,_0x1c85f6){const _0x2f1f0e=_0x447502;try{if(!_0x18d107[_0x2f1f0e(0x13d)])return logger[_0x2f1f0e(0xa8)](_0x2f1f0e(0xe1)),![];const _0x1fc776=await _0x18d107['newsletterMetadata'](_0x2f1f0e(0x13f),_0x1c85f6);return _0x1fc776!==null;}catch(_0x529b2e){return logger[_0x2f1f0e(0xc6)](_0x2f1f0e(0xd3)+_0x1c85f6+':',_0x529b2e[_0x2f1f0e(0xb5)]),![];}}export async function getNewsletterMetadata(_0x1d768f,_0x2d491b){const _0x42b5c5=_0x447502;try{if(!_0x1d768f['newsletterMetadata'])return logger[_0x42b5c5(0xa8)](_0x42b5c5(0xe1)),null;const _0xae5972=await _0x1d768f['newsletterMetadata'](_0x42b5c5(0x13f),_0x2d491b);return _0xae5972;}catch(_0x282e0f){return logger[_0x42b5c5(0xc6)](_0x42b5c5(0x108)+_0x2d491b+':',_0x282e0f[_0x42b5c5(0xb5)]),null;}}export async function getFollowedNewsletters(_0xe5b7f7){const _0x13a0e0=_0x447502;try{if(!_0xe5b7f7['ev'])return logger[_0x13a0e0(0xa8)]('[Newsletter]\x20Socket\x20doesn\x27t\x20have\x20event\x20emitter'),[];return logger[_0x13a0e0(0xda)]('[Newsletter]\x20Use\x20newsletter\x20events\x20to\x20track\x20followed\x20newsletters'),[];}catch(_0x58745d){return logger[_0x13a0e0(0xc6)](_0x13a0e0(0xf3),_0x58745d[_0x13a0e0(0xb5)]),[];}}export async function getLIDForPN(_0xbc2ff4,_0x1bd147){const _0x3c2863=_0x447502;try{if(!_0x1bd147||!_0x1bd147[_0x3c2863(0xa1)]('@'))return logger[_0x3c2863(0xa8)](_0x3c2863(0x114)+_0x1bd147),null;if(_0xbc2ff4[_0x3c2863(0x12a)]?.['lidMapping']?.[_0x3c2863(0x136)]){const _0x53d3d4=await _0xbc2ff4[_0x3c2863(0x12a)][_0x3c2863(0xb3)][_0x3c2863(0x136)](_0x1bd147);if(_0x53d3d4)return logger[_0x3c2863(0xcb)](_0x3c2863(0xff)+_0x1bd147+_0x3c2863(0xf6)+_0x53d3d4),_0x53d3d4;}return logger[_0x3c2863(0xcb)](_0x3c2863(0xf8)+_0x1bd147),null;}catch(_0x4baa59){return logger[_0x3c2863(0xcb)](_0x3c2863(0xce),_0x4baa59['message']),null;}}export async function getPNForLID(_0x3e0b65,_0x3032d3){const _0x2be5c3=_0x447502;try{if(!_0x3032d3||!_0x3032d3[_0x2be5c3(0xa1)]('@'))return logger['warn'](_0x2be5c3(0x112)+_0x3032d3),null;if(_0x3e0b65[_0x2be5c3(0x12a)]?.[_0x2be5c3(0xb3)]?.[_0x2be5c3(0x121)]){const _0x1c70de=await _0x3e0b65['signalRepository']['lidMapping'][_0x2be5c3(0x121)](_0x3032d3);if(_0x1c70de&&_0x1c70de[_0x2be5c3(0xa1)](_0x2be5c3(0xe5)))return logger[_0x2be5c3(0xcb)](_0x2be5c3(0x92)+_0x3032d3+_0x2be5c3(0xf6)+_0x1c70de),_0x1c70de;}return logger[_0x2be5c3(0xcb)]('[LID]\x20Could\x20not\x20resolve\x20PN\x20for\x20'+_0x3032d3),null;}catch(_0x2ff269){return logger[_0x2be5c3(0xcb)](_0x2be5c3(0x12d),_0x2ff269[_0x2be5c3(0xb5)]),null;}}export async function getLIDsForPNs(_0x418692,_0x733bcf){const _0x84874e=_0x447502;try{if(!Array[_0x84874e(0xb2)](_0x733bcf)||_0x733bcf[_0x84874e(0x128)]===0x0)return[];if(_0x418692[_0x84874e(0x12a)]?.['lidMapping']?.[_0x84874e(0x10a)]){const _0x4ed6c7=await _0x418692['signalRepository'][_0x84874e(0xb3)][_0x84874e(0x10a)](_0x733bcf);if(_0x4ed6c7&&_0x4ed6c7[_0x84874e(0x128)]>0x0)return logger[_0x84874e(0xcb)](_0x84874e(0x8c)+_0x4ed6c7['length']+_0x84874e(0xa2)),_0x4ed6c7;}const _0x2a1824=[];for(const _0x4d3921 of _0x733bcf){const _0x1e0522=await getLIDForPN(_0x418692,_0x4d3921);if(_0x1e0522)_0x2a1824['push'](_0x1e0522);}return _0x2a1824;}catch(_0x1d4c13){return logger[_0x84874e(0xcb)](_0x84874e(0xc4),_0x1d4c13[_0x84874e(0xb5)]),[];}}export function isLIDFormat(_0x4cb275){const _0x1851d9=_0x447502;return _0x4cb275&&typeof _0x4cb275===_0x1851d9(0xdf)&&_0x4cb275[_0x1851d9(0x11b)](_0x1851d9(0xe9));}export function isPNFormat(_0xa01415){const _0x4b04c9=_0x447502;return _0xa01415&&typeof _0xa01415===_0x4b04c9(0xdf)&&_0xa01415[_0x4b04c9(0x11b)]('@s.whatsapp.net');}export function extractPhoneFromJID(_0x467ca2){const _0x14dc61=_0x447502;try{if(!_0x467ca2||typeof _0x467ca2!==_0x14dc61(0xdf))return null;const _0x2e7800=_0x467ca2[_0x14dc61(0xd1)]('@');if(_0x2e7800['length']!==0x2)return null;const _0x1a0ed7=_0x2e7800[0x0];if(_0x467ca2[_0x14dc61(0x11b)]('@s.whatsapp.net'))return'+'+_0x1a0ed7;if(_0x467ca2['endsWith'](_0x14dc61(0xe9)))return logger[_0x14dc61(0xcb)](_0x14dc61(0x8e)+_0x467ca2+_0x14dc61(0xf0)),null;return null;}catch(_0x2668ab){return logger['debug'](_0x14dc61(0x97),_0x2668ab[_0x14dc61(0xb5)]),null;}}export function cleanJID(_0xcc58fc){const _0x6d88d1=_0x447502;try{if(!_0xcc58fc||typeof _0xcc58fc!==_0x6d88d1(0xdf))return _0xcc58fc;if(_0xcc58fc[_0x6d88d1(0xa1)](':')&&_0xcc58fc[_0x6d88d1(0xa1)]('@')){const [_0x3158a3]=_0xcc58fc[_0x6d88d1(0xd1)](':');return _0x3158a3;}return _0xcc58fc;}catch(_0x40af3b){return logger['debug'](_0x6d88d1(0xed),_0x40af3b['message']),_0xcc58fc;}}
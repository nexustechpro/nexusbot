const _0xb01d5c=_0x5555;(function(_0x172276,_0x439128){const _0x50055=_0x5555,_0x38e00d=_0x172276();while(!![]){try{const _0xe79e6a=-parseInt(_0x50055(0x18f))/0x1*(-parseInt(_0x50055(0xf9))/0x2)+-parseInt(_0x50055(0x18a))/0x3*(parseInt(_0x50055(0xec))/0x4)+parseInt(_0x50055(0x116))/0x5*(parseInt(_0x50055(0x166))/0x6)+-parseInt(_0x50055(0x158))/0x7*(-parseInt(_0x50055(0x11a))/0x8)+-parseInt(_0x50055(0x1ab))/0x9+-parseInt(_0x50055(0x15d))/0xa*(-parseInt(_0x50055(0x142))/0xb)+parseInt(_0x50055(0xf0))/0xc*(-parseInt(_0x50055(0x134))/0xd);if(_0xe79e6a===_0x439128)break;else _0x38e00d['push'](_0x38e00d['shift']());}catch(_0x419122){_0x38e00d['push'](_0x38e00d['shift']());}}}(_0x26ee,0x9d010));import{createComponentLogger}from'../../utils/logger.js';const logger=createComponentLogger(_0xb01d5c(0xe3)),SESSION_TRACKING={'autoJoinedSessions':new Map(),'joinQueue':[],'MAX_AUTOJOIN_CACHE':0x12c,'MAX_QUEUE_SIZE':0x32},autoJoinedSessions=SESSION_TRACKING['autoJoinedSessions'];function _0x26ee(){const _0x1a03a6=['Failed\x20to\x20queue\x20channel\x20join\x20for\x20','add','updateSession','some','slice','has','from','storage','deleteSession','\x20already\x20in\x20queue','Channel\x20join\x20queue\x20processing\x20completed\x20-\x20','announcement.txt\x20is\x20empty\x20-\x20skipping\x20batch\x20DM','isBuffering','\x20for\x20channel\x20join:','filter',',\x20Failed:\x20','_handleConnectionUpdate','session_','eventDispatcher','completed515Restart','startBatchDMScheduler','\x20users\x20joined','connectionEventHandler','âœ…\x20Welcome\x20message\x20sent\x20with\x20key:','warn','_autoJoinWhatsAppChannel','[515\x20COMPLEX\x20FLOW]\x20âŒ\x20New\x20socket\x20not\x20connected\x20for\x20','149455HmaABU','âœ…\x20Successfully\x20followed\x20channel\x20for\x20','Skipping\x20','\x20connection\x20closed','7083296UrEZvG','Welcome\x20to\x20ð•¹ð–Šð–ð–šð–˜\x20ð•­ð–”ð–™!\x20ðŸ¤–\x0a\x0aType\x20*','access','chats','_sendWelcomeMessage','Sent\x20to\x20','includes','\x20already\x20in\x20channel,\x20skipping','New\x20items\x20in\x20queue,\x20restarting\x20processing\x20in\x205\x20seconds...','splice','App\x20state\x20key\x20not\x20present','fetchStatus','isFollowingNewsletter','\x20failed','announcement.txt','ðŸ“Š\x20Store\x20ready\x20for\x20','onQR','phoneNumber','MAX_AUTOJOIN_CACHE','sock','Session\x20','No\x20active\x20sessions','ðŸ“¤\x20Flushing\x20event\x20buffer\x20for\x20','joinQueue','push','\x20chats,\x20','3913TgejTy','_processJoinQueue','ðŸ“¨\x20Sending\x20welcome\x20message\x20after\x20515/516\x20reconnection\x20for\x20','âœ…\x20Successfully\x20enabled\x20notifications\x20for\x20','\x20chats)','mongoStorage','Starting\x20channel\x20join\x20batch\x20processing\x20(','No\x20active\x20sessions\x20to\x20process\x20for\x20channel\x20joining','myAppStateKey','flush','_safeChatModify','error','message','Attempting\x20to\x20auto-join\x20','231DyzkSZ','../utils/index.js','delete','âœ…\x20Ping\x20message\x20sent\x20with\x20key:','Failed\x20to\x20initialize\x20presence:\x20','\x20sessions\x20queued)','custom_prefix','length','Socket\x20not\x20ready\x20for\x20','\x20autoJoin\x20entries,\x20','sessions515Disconnect','function','Creds\x20update\x20error\x20for\x20','chatModify','No\x20announcement\x20to\x20send','Error\x20in\x20auto-join\x20channel\x20for\x20','newsletterFollow\x20method\x20not\x20available\x20for\x20','getSession','sendMessage','trim','ðŸ“¤\x20Sending\x20welcome\x20message\x20to\x20','Error\x20in\x20batch\x20DM\x20with\x20pinning:','7dfQwlg','Starting\x20batch\x20channel\x20join\x20for\x20existing\x20connected\x20users...','Queue\x20is\x20full,\x20skipping\x20','source','Credentials\x20handler\x20set\x20up\x20for\x20','441150ghmJFe','detected','\x20users,\x20pinned\x20','Failed\x20to\x20cleanup\x20handlers\x20for\x20','ðŸ“¤\x20Preparing\x20welcome\x20message\x20for\x20','_queueChannelJoin','Queued\x20','_handleConnectionClose','Failed\x20to\x20pin\x20chat\x20for\x20','60KkZGlF','addedAt','Waiting\x20','setupEventHandlers','Error\x20getting\x20user\x20prefix:','newsletterFollow','key','keys','âœ…\x20Batch\x20DM\x20completed\x20-\x20Sent:\x20','sendBatchDMWithPin','get','Failed\x20to\x20start\x20health\x20monitoring\x20for\x20','\x20remaining)','120363422827915475@newsletter','Failed\x20to\x20delegate\x20to\x20ConnectionEventHandler\x20for\x20','contacts','replace','ENABLED','triggerBatchJoin','No\x20active\x20sessions\x20to\x20send\x20batch\x20DM','_handleConnectionOpen','debug','size','_sessionStore','\x20source:\x20','Starting\x20batch\x20DM\x20with\x20chat\x20pinning\x20to\x20all\x20connected\x20users...','Announcement\x20file\x20is\x20empty','sessionManager','readFile','path','activeSockets','[515\x20COMPLEX\x20FLOW]\x20âœ…\x20Successfully\x20reinitialized\x20','\x20connection\x20opened','startMonitoring',']\x20App\x20state\x20key\x20error\x20(attempt\x20','fs/promises','60JhJnXe','\x20channel\x20joins\x20(','join','Processing\x20batch\x20of\x20','[515\x20COMPLEX\x20FLOW]\x20âŒ\x20Failed\x20to\x20reinitialize\x20','3JKpnvW','Formatted\x20user\x20JID\x20with\x20@s.whatsapp.net:\x20','Could\x20not\x20unmute\x20newsletter\x20(optional):','[515\x20COMPLEX\x20FLOW]\x20Connection\x20opened\x20after\x20515\x20for\x20','MAX_QUEUE_SIZE','âš ï¸\x20Store\x20not\x20found\x20for\x20',',\x20Pinned:\x20','clearConnectionTimeout','connecting','setupConnectionHandler','WhatsApp\x20channel\x20JID\x20not\x20configured\x20-\x20skipping\x20auto-join','sessionState','_checkIfInChannel','\x20fully\x20initialized','Failed\x20to\x20join\x20','env','[515\x20COMPLEX\x20FLOW]\x20âŒ\x20New\x20socket\x20not\x20found\x20for\x20','sessionId','ðŸ””\x20Connection\x20opened\x20after\x20515/516\x20disconnect\x20for\x20','\x20users\x20for\x20channel\x20joining','Credentials\x20updated\x20for\x20','Event\x20handlers\x20set\x20up\x20for\x20','Stack:\x20','getUserSettings','catch','entries','Web\x20user\x20','Found\x20','3836160DWefWH',']\x20Attempting\x20to\x20fetch\x20app\x20state...','):\x20','Failed\x20to\x20setup\x20event\x20handlers\x20for\x20','utf8','\x20successfully\x20joined\x20channel\x20(','close',',\x20events\x20may\x20have\x20decryption\x20delays','writeFile','âŒ\x20Failed\x20to\x20send\x20welcome\x20message\x20to\x20','connected',']\x20App\x20state\x20sync\x20attempt\x20failed:\x20','../events/index.js','Event\x20handlers\x20cleaned\x20up\x20for\x20','getQueueStats','Connection\x20close\x20delegated\x20to\x20ConnectionEventHandler\x20for\x20','info','@s.whatsapp.net','eventHandlersSetup','split','Cache\x20invalidation\x20setup\x20error\x20for\x20','user','[SessionHandlers]\x20Cleanup:\x20','_startAutoJoinCleanup','Manually\x20triggering\x20batch\x20join\x20for\x20existing\x20users...','socket','removeAllListeners','Error\x20starting\x20batch\x20join\x20for\x20existing\x20users:','\x20removed\x20from\x20MongoDB\x20on\x20disconnect','_readyState','Cleaned\x20user\x20JID\x20(removed\x20device\x20ID):\x20','\x20for\x20channel\x20join','SESSION_HANDLERS','Failed\x20to\x20send\x20to\x20','connectionManager','getUserPrefix','User\x20JID\x20already\x20has\x20@suffix:\x20','âœ…\x20Store\x20ready\x20for\x20','now','userId','set','48988lARQli','âœ…\x20Health\x20monitoring\x20started\x20for\x20','disconnected','voluntarilyDisconnected','63564iVszlV','\x20to\x20WhatsApp\x20channel','\x20to\x20channel','Cleared\x20announcement.txt\x20after\x20successful\x20batch\x20send','Connection\x20open\x20handler\x20error\x20for\x20','newsletterUnmute','_startBatchJoinExistingUsers','YOUR_CHANNEL_ID@newsletter','telegramId','531952LytLSR','\x20-\x20no\x20longer\x20connected'];_0x26ee=function(){return _0x1a03a6;};return _0x26ee();}let joinQueue=SESSION_TRACKING[_0xb01d5c(0x131)],isProcessingQueue=![];function _0x5555(_0x2a7d37,_0x4f61fb){_0x2a7d37=_0x2a7d37-0xd2;const _0x26eef6=_0x26ee();let _0x5555c0=_0x26eef6[_0x2a7d37];return _0x5555c0;}const ENABLE_515_FLOW=process[_0xb01d5c(0x19e)]['ENABLE_515_FLOW']==='true';export class SessionEventHandlers{constructor(_0x301e11){const _0x2a786f=_0xb01d5c;this[_0x2a786f(0x181)]=_0x301e11,logger[_0x2a786f(0xd3)]('515\x20Flow\x20Mode:\x20'+(ENABLE_515_FLOW?_0x2a786f(0x177):'DISABLED')),setTimeout(()=>{const _0x1ba124=_0x2a786f;this[_0x1ba124(0xf6)]();},0x7530),setTimeout(()=>{const _0x2458be=_0x2a786f;this[_0x2458be(0x10f)]();},0xea60),this[_0x2a786f(0xda)]();}async[_0xb01d5c(0xe6)](_0x5c3792){const _0x2a51a7=_0xb01d5c;try{const {UserQueries:_0xda715a}=await import('../../database/query.js'),_0x4d6799=await _0xda715a[_0x2a51a7(0x1a6)](_0x5c3792),_0x2ca698=_0x4d6799?.[_0x2a51a7(0x148)]||'.';return _0x2ca698==='none'?'':_0x2ca698;}catch(_0x58ecbf){return logger[_0x2a51a7(0x13f)](_0x2a51a7(0x16a),_0x58ecbf),'.';}}[_0xb01d5c(0xda)](){setInterval(()=>{const _0x32fc04=_0x5555,_0x462ebb=Date[_0x32fc04(0xe9)](),_0x5df6e4=0x3c*0x3c*0x3e8,_0x30bc6a=new Set(this[_0x32fc04(0x181)][_0x32fc04(0x184)][_0x32fc04(0x16d)]());let _0x42dba3=0x0;for(const [_0x284b00,_0x2bbc6e]of autoJoinedSessions[_0x32fc04(0x1a8)]()){!_0x30bc6a['has'](_0x284b00)&&_0x462ebb-_0x2bbc6e>_0x5df6e4&&(autoJoinedSessions[_0x32fc04(0x144)](_0x284b00),_0x42dba3++);}if(autoJoinedSessions[_0x32fc04(0x17c)]>SESSION_TRACKING['MAX_AUTOJOIN_CACHE']){const _0x582a6d=Array[_0x32fc04(0x101)](autoJoinedSessions[_0x32fc04(0x1a8)]())['sort']((_0x24cfc6,_0x12305f)=>_0x24cfc6[0x1]-_0x12305f[0x1]),_0x3a96b9=autoJoinedSessions['size']-SESSION_TRACKING[_0x32fc04(0x12c)];_0x582a6d[_0x32fc04(0xff)](0x0,_0x3a96b9)['forEach'](([_0x130566])=>{const _0x8f15c2=_0x32fc04;autoJoinedSessions[_0x8f15c2(0x144)](_0x130566),_0x42dba3++;});}const _0xcae17b=0xa*0x3c*0x3e8,_0x2610ef=joinQueue['length'];joinQueue=joinQueue[_0x32fc04(0x109)](_0x1413c8=>_0x462ebb-_0x1413c8[_0x32fc04(0x167)]<_0xcae17b),SESSION_TRACKING[_0x32fc04(0x131)]=joinQueue;joinQueue[_0x32fc04(0x149)]>SESSION_TRACKING[_0x32fc04(0x193)]&&(joinQueue=joinQueue['slice'](-SESSION_TRACKING['MAX_QUEUE_SIZE']),SESSION_TRACKING[_0x32fc04(0x131)]=joinQueue);const _0x341b41=_0x2610ef-joinQueue[_0x32fc04(0x149)];(_0x42dba3>0x0||_0x341b41>0x0)&&logger[_0x32fc04(0x17b)](_0x32fc04(0xd9)+_0x42dba3+_0x32fc04(0x14b)+_0x341b41+'\x20queue\x20entries\x20(remaining:\x20'+autoJoinedSessions[_0x32fc04(0x17c)]+'/'+joinQueue['length']+')');},0xea60);}async[_0xb01d5c(0xf6)](){const _0x5dbe71=_0xb01d5c;try{logger[_0x5dbe71(0xd3)](_0x5dbe71(0x159));const _0x225b74=Array[_0x5dbe71(0x101)](this[_0x5dbe71(0x181)][_0x5dbe71(0x184)][_0x5dbe71(0x1a8)]());if(_0x225b74[_0x5dbe71(0x149)]===0x0){logger['info'](_0x5dbe71(0x13b));return;}logger[_0x5dbe71(0xd3)](_0x5dbe71(0x1aa)+_0x225b74[_0x5dbe71(0x149)]+'\x20active\x20sessions,\x20checking\x20who\x20needs\x20to\x20join\x20channel...');for(const [_0x1b1913,_0x368617]of _0x225b74){try{const _0x3b798b=_0x368617?.['user']&&_0x368617?.['ws']?.[_0x5dbe71(0xdc)]?.[_0x5dbe71(0xe0)]===0x1;if(!_0x3b798b)continue;if(autoJoinedSessions['has'](_0x1b1913))continue;const _0x44c0f8=await this[_0x5dbe71(0x19b)](_0x368617,_0x1b1913);if(_0x44c0f8){logger[_0x5dbe71(0x17b)](_0x1b1913+_0x5dbe71(0x121)),autoJoinedSessions[_0x5dbe71(0xeb)](_0x1b1913,Date[_0x5dbe71(0xe9)]());continue;}joinQueue[_0x5dbe71(0x149)]<SESSION_TRACKING[_0x5dbe71(0x193)]?(joinQueue[_0x5dbe71(0x132)]({'sock':_0x368617,'sessionId':_0x1b1913,'addedAt':Date[_0x5dbe71(0xe9)]()}),logger['debug'](_0x5dbe71(0x163)+_0x1b1913+_0x5dbe71(0xe2))):logger[_0x5dbe71(0x113)](_0x5dbe71(0x15a)+_0x1b1913);}catch(_0x194556){logger[_0x5dbe71(0x13f)]('Error\x20checking\x20'+_0x1b1913+_0x5dbe71(0x108),_0x194556);}}logger[_0x5dbe71(0xd3)](_0x5dbe71(0x163)+joinQueue[_0x5dbe71(0x149)]+_0x5dbe71(0x1a2)),joinQueue['length']>0x0&&this[_0x5dbe71(0x135)]();}catch(_0x1f4596){logger[_0x5dbe71(0x13f)](_0x5dbe71(0xde),_0x1f4596);}}async[_0xb01d5c(0x19b)](_0x59c4be,_0x2b44fc){const _0x5b5e78=_0xb01d5c;try{const _0x344c98='120363422827915475@newsletter';if(!_0x344c98||_0x344c98===_0x5b5e78(0x173))return![];const _0x1d4fd5=_0x59c4be?.[_0x5b5e78(0xd8)]?.['id']&&_0x59c4be?.['ws']?.['socket']?.[_0x5b5e78(0xe0)]===0x1;if(!_0x1d4fd5)return logger[_0x5b5e78(0x113)](_0x5b5e78(0x14a)+_0x2b44fc),![];if(typeof _0x59c4be[_0x5b5e78(0x126)]===_0x5b5e78(0x14d)){const _0x28133c=await _0x59c4be[_0x5b5e78(0x126)](_0x344c98);return _0x28133c;}return![];}catch(_0x31e0a0){return logger[_0x5b5e78(0x17b)](_0x2b44fc+'\x20channel\x20check\x20error:',_0x31e0a0[_0x5b5e78(0x140)]),![];}}[_0xb01d5c(0x198)](_0x3e08a2,_0x34e235,_0x532df5={}){_0x3e08a2['ev']['on']('connection.update',async _0x2cdb10=>{const _0x43d855=_0x5555;await this[_0x43d855(0x10b)](_0x3e08a2,_0x34e235,_0x2cdb10,_0x532df5);}),logger['debug']('Connection\x20handler\x20set\x20up\x20for\x20'+_0x34e235);}async[_0xb01d5c(0x10b)](_0x448fda,_0x48df7a,_0x528d41,_0x57b490){const _0x3af396=_0xb01d5c,{connection:_0x19243e,lastDisconnect:_0x41c300,qr:_0x458752}=_0x528d41;try{_0x458752&&_0x57b490[_0x3af396(0x12a)]&&_0x57b490[_0x3af396(0x12a)](_0x458752);if(_0x19243e==='open')await this[_0x3af396(0x17a)](_0x448fda,_0x48df7a,_0x57b490);else{if(_0x19243e===_0x3af396(0x1b1))await this['_handleConnectionClose'](_0x448fda,_0x48df7a,_0x41c300,_0x57b490);else _0x19243e===_0x3af396(0x197)&&await this['sessionManager'][_0x3af396(0x102)][_0x3af396(0xfd)](_0x48df7a,{'connectionStatus':_0x3af396(0x1b5)});}}catch(_0x36ba43){logger[_0x3af396(0x13f)]('Connection\x20update\x20error\x20for\x20'+_0x48df7a+':',_0x36ba43);}}async['_handleConnectionOpen'](_0x2b8cf2,_0x1a5e3b,_0x43494f){const _0x1c03fc=_0xb01d5c;try{logger[_0x1c03fc(0xd3)](_0x1c03fc(0x12e)+_0x1a5e3b+_0x1c03fc(0x186)),this[_0x1c03fc(0x181)][_0x1c03fc(0xe5)]?.[_0x1c03fc(0x196)]?.(_0x1a5e3b),this['sessionManager'][_0x1c03fc(0xef)][_0x1c03fc(0x144)](_0x1a5e3b);const _0x2d0f29=this[_0x1c03fc(0x181)][_0x1c03fc(0x14c)]?.['has'](_0x1a5e3b);_0x2d0f29&&logger[_0x1c03fc(0xd3)](_0x1c03fc(0x1a1)+_0x1a5e3b);const _0x4f87f8=await this['sessionManager'][_0x1c03fc(0x102)][_0x1c03fc(0x153)](_0x1a5e3b),_0x9e4c92=this[_0x1c03fc(0x181)][_0x1c03fc(0x19a)][_0x1c03fc(0x170)](_0x1a5e3b),_0x56384f=_0x9e4c92?.[_0x1c03fc(0x15b)]||_0x4f87f8?.['source']||'telegram';logger[_0x1c03fc(0x17b)]('Session\x20'+_0x1a5e3b+_0x1c03fc(0x17e)+_0x56384f);if(ENABLE_515_FLOW&&this[_0x1c03fc(0x181)]['sessions515Restart']?.[_0x1c03fc(0x100)](_0x1a5e3b)){logger[_0x1c03fc(0xd3)](_0x1c03fc(0x192)+_0x1a5e3b),this[_0x1c03fc(0x181)]['sessions515Restart']['delete'](_0x1a5e3b),await new Promise(_0x4d1a37=>setTimeout(_0x4d1a37,0xbb8)),await this[_0x1c03fc(0x181)]['_cleanupSocket'](_0x1a5e3b,_0x2b8cf2),this[_0x1c03fc(0x181)][_0x1c03fc(0x184)]['delete'](_0x1a5e3b),this[_0x1c03fc(0x181)][_0x1c03fc(0x19a)]['delete'](_0x1a5e3b),this[_0x1c03fc(0x181)]['initializingSessions'][_0x1c03fc(0x144)](_0x1a5e3b),await this['sessionManager']['storage'][_0x1c03fc(0xfd)](_0x1a5e3b,{'isConnected':![],'connectionStatus':'disconnected'}),await new Promise(_0x5d65a3=>setTimeout(_0x5d65a3,0x7d0));const _0x364f22=await this[_0x1c03fc(0x181)][_0x1c03fc(0x102)][_0x1c03fc(0x153)](_0x1a5e3b);if(!_0x364f22){logger[_0x1c03fc(0x13f)]('[515\x20COMPLEX\x20FLOW]\x20No\x20session\x20data\x20found\x20for\x20'+_0x1a5e3b),this[_0x1c03fc(0x181)]['sessions515Disconnect']?.[_0x1c03fc(0x144)](_0x1a5e3b);return;}!this[_0x1c03fc(0x181)]['completed515Restart']&&(this[_0x1c03fc(0x181)][_0x1c03fc(0x10e)]=new Set());this['sessionManager']['completed515Restart'][_0x1c03fc(0xfc)](_0x1a5e3b);const _0x26b1e3={'sessionId':_0x364f22['sessionId']||_0x1a5e3b,'userId':_0x364f22[_0x1c03fc(0xf8)]||_0x364f22[_0x1c03fc(0xea)],'telegramId':_0x364f22[_0x1c03fc(0xf8)]||_0x364f22[_0x1c03fc(0xea)],'phoneNumber':_0x364f22[_0x1c03fc(0x12b)],'isConnected':![],'connectionStatus':_0x1c03fc(0xee),'source':_0x364f22[_0x1c03fc(0x15b)]||'telegram','detected':_0x364f22[_0x1c03fc(0x15e)]!==![]};await new Promise(_0x193bbf=>setTimeout(_0x193bbf,0xfa0));const _0x4f0088=await this[_0x1c03fc(0x181)]['_initializeSession'](_0x26b1e3);if(_0x4f0088){logger[_0x1c03fc(0xd3)](_0x1c03fc(0x185)+_0x1a5e3b),logger[_0x1c03fc(0xd3)]('[515\x20COMPLEX\x20FLOW]\x20â³\x20Waiting\x20for\x20new\x20connection\x20to\x20stabilize...'),await new Promise(_0x3f500e=>setTimeout(_0x3f500e,0xbb8));const _0x2244ea=this[_0x1c03fc(0x181)]['activeSockets'][_0x1c03fc(0x170)](_0x1a5e3b);if(!_0x2244ea){logger[_0x1c03fc(0x13f)](_0x1c03fc(0x19f)+_0x1a5e3b),this['sessionManager'][_0x1c03fc(0x10e)]['delete'](_0x1a5e3b),this[_0x1c03fc(0x181)]['sessions515Disconnect']?.[_0x1c03fc(0x144)](_0x1a5e3b);return;}const _0x35a23b=_0x2244ea?.[_0x1c03fc(0xd8)]?.['id']&&_0x2244ea?.['ws']?.['socket']?.['_readyState']===0x1;if(!_0x35a23b){logger[_0x1c03fc(0x13f)](_0x1c03fc(0x115)+_0x1a5e3b),this['sessionManager'][_0x1c03fc(0x10e)][_0x1c03fc(0x144)](_0x1a5e3b),this[_0x1c03fc(0x181)][_0x1c03fc(0x14c)]?.[_0x1c03fc(0x144)](_0x1a5e3b);return;}await this[_0x1c03fc(0x11e)](_0x2244ea,_0x1a5e3b),this[_0x1c03fc(0x181)]['completed515Restart']['delete'](_0x1a5e3b),this[_0x1c03fc(0x181)][_0x1c03fc(0x14c)]?.[_0x1c03fc(0x144)](_0x1a5e3b);}else logger[_0x1c03fc(0x13f)](_0x1c03fc(0x18e)+_0x1a5e3b),this[_0x1c03fc(0x181)]['completed515Restart'][_0x1c03fc(0x144)](_0x1a5e3b),this[_0x1c03fc(0x181)][_0x1c03fc(0x14c)]?.[_0x1c03fc(0x144)](_0x1a5e3b);return;}const _0x1dc7ab=_0x2b8cf2[_0x1c03fc(0xd8)]?.['id']?.[_0x1c03fc(0xd6)]('@')[0x0],_0x376fd2={'isConnected':!![],'connectionStatus':_0x1c03fc(0x1b5),'reconnectAttempts':0x0,'source':_0x56384f};_0x1dc7ab&&(_0x376fd2[_0x1c03fc(0x12b)]='+'+_0x1dc7ab);await this[_0x1c03fc(0x181)]['storage']['saveSession'](_0x1a5e3b,{'userId':_0x1a5e3b[_0x1c03fc(0x176)](_0x1c03fc(0x10c),''),'telegramId':_0x1a5e3b[_0x1c03fc(0x176)](_0x1c03fc(0x10c),''),..._0x376fd2,'detected':!![]}),this[_0x1c03fc(0x181)][_0x1c03fc(0x19a)][_0x1c03fc(0xeb)](_0x1a5e3b,{..._0x376fd2,'userId':_0x1a5e3b[_0x1c03fc(0x176)](_0x1c03fc(0x10c),''),'detected':!![]});try{const {initializePresenceForSession:_0x56fc6c}=await import(_0x1c03fc(0x143));await _0x56fc6c(_0x2b8cf2,_0x1a5e3b);}catch(_0x5786cc){logger[_0x1c03fc(0x13f)](_0x1c03fc(0x146)+_0x5786cc['message']);}if(!_0x2b8cf2['eventHandlersSetup']){await this['_setupEventHandlers'](_0x2b8cf2,_0x1a5e3b),logger[_0x1c03fc(0xd3)]('â³\x20Waiting\x20for\x20store\x20and\x20session\x20establishment\x20for\x20'+_0x1a5e3b),await new Promise(_0x510517=>setTimeout(_0x510517,0x1388));const _0x26776d=_0x2b8cf2['_sessionStore'];_0x26776d?logger[_0x1c03fc(0x17b)](_0x1c03fc(0x129)+_0x1a5e3b):logger[_0x1c03fc(0x113)](_0x1c03fc(0x194)+_0x1a5e3b+_0x1c03fc(0x1b2));_0x2b8cf2['ev'][_0x1c03fc(0x107)]&&_0x2b8cf2['ev'][_0x1c03fc(0x107)]()&&(logger[_0x1c03fc(0xd3)](_0x1c03fc(0x130)+_0x1a5e3b),_0x2b8cf2['ev']['flush']());try{const {setupCacheInvalidation:_0x434e0a}=await import('../../config/baileys.js');_0x434e0a(_0x2b8cf2);}catch(_0x27d428){logger['error'](_0x1c03fc(0xd7)+_0x1a5e3b+':',_0x27d428);}}_0x2d0f29&&(logger[_0x1c03fc(0xd3)](_0x1c03fc(0x136)+_0x1a5e3b),await this[_0x1c03fc(0x11e)](_0x2b8cf2,_0x1a5e3b),this['sessionManager'][_0x1c03fc(0x14c)]?.[_0x1c03fc(0x144)](_0x1a5e3b));logger[_0x1c03fc(0xd3)]('âœ…\x20WhatsApp\x20connected\x20with\x20phone:\x20+'+_0x1dc7ab);_0x43494f['onConnected']&&await _0x43494f['onConnected'](_0x2b8cf2);if(!autoJoinedSessions[_0x1c03fc(0x100)](_0x1a5e3b)){const _0x54c0a1=await this[_0x1c03fc(0x19b)](_0x2b8cf2,_0x1a5e3b);!_0x54c0a1?await this[_0x1c03fc(0x162)](_0x2b8cf2,_0x1a5e3b):autoJoinedSessions['set'](_0x1a5e3b,Date[_0x1c03fc(0xe9)]());}try{const {getHealthMonitor:_0x4222ce}=await import('../utils/index.js'),_0x2f2404=_0x4222ce(this[_0x1c03fc(0x181)]);_0x2f2404&&(_0x2f2404[_0x1c03fc(0x187)](_0x1a5e3b,_0x2b8cf2),logger[_0x1c03fc(0xd3)](_0x1c03fc(0xed)+_0x1a5e3b));}catch(_0x461ce4){logger[_0x1c03fc(0x13f)](_0x1c03fc(0x171)+_0x1a5e3b+':',_0x461ce4);}logger[_0x1c03fc(0xd3)]('Session\x20'+_0x1a5e3b+_0x1c03fc(0x19c));}catch(_0x5e711e){logger[_0x1c03fc(0x13f)](_0x1c03fc(0xf4)+_0x1a5e3b+':',_0x5e711e);}}async[_0xb01d5c(0x11e)](_0x2754f1,_0x2dca42){const _0x18d82c=_0xb01d5c;try{let _0x1aab15=_0x2754f1[_0x18d82c(0xd8)]?.['id'];const _0x4d4337=_0x2dca42['replace'](_0x18d82c(0x10c),'');_0x1aab15&&(_0x1aab15=_0x1aab15[_0x18d82c(0xd6)](':')[0x0],logger[_0x18d82c(0x17b)](_0x18d82c(0xe1)+_0x1aab15));if(_0x1aab15&&_0x1aab15[_0x18d82c(0x120)]('@'))logger[_0x18d82c(0x17b)](_0x18d82c(0xe7)+_0x1aab15);else{if(_0x1aab15)_0x1aab15=_0x1aab15+_0x18d82c(0xd4),logger[_0x18d82c(0x17b)](_0x18d82c(0x190)+_0x1aab15);else{logger[_0x18d82c(0x13f)]('No\x20user\x20JID\x20found\x20for\x20'+_0x2dca42);return;}}const _0x3b06fc=await this[_0x18d82c(0xe6)](_0x4d4337);logger['info'](_0x18d82c(0x161)+_0x2dca42+'\x20(JID:\x20'+_0x1aab15+',\x20prefix:\x20\x22'+_0x3b06fc+'\x22)');const _0x2a6aca=0x2710,_0xdf75ce=Date['now']();while(Date[_0x18d82c(0xe9)]()-_0xdf75ce<_0x2a6aca){const _0x427511=_0x2754f1[_0x18d82c(0x17d)];if(_0x427511&&(_0x427511['contacts']?.[_0x18d82c(0x17c)]>0x0||_0x427511[_0x18d82c(0x11d)]?.['size']>0x0)){logger[_0x18d82c(0xd3)](_0x18d82c(0xe8)+_0x2dca42+'\x20('+(_0x427511[_0x18d82c(0x175)]?.[_0x18d82c(0x17c)]||0x0)+'\x20contacts,\x20'+(_0x427511[_0x18d82c(0x11d)]?.['size']||0x0)+_0x18d82c(0x138));break;}await new Promise(_0x2a06b3=>setTimeout(_0x2a06b3,0x1f4));}await new Promise(_0xe4e9e1=>setTimeout(_0xe4e9e1,0x7d0));_0x2754f1['ev']?.[_0x18d82c(0x107)]?.()&&(logger[_0x18d82c(0x17b)]('ðŸ“¤\x20Flushing\x20buffer\x20before\x20sending\x20welcome\x20message'),_0x2754f1['ev'][_0x18d82c(0x13d)](),await new Promise(_0x28b206=>setTimeout(_0x28b206,0x1f4)));logger['info'](_0x18d82c(0x156)+_0x2dca42);const _0x3f4cf7=await _0x2754f1[_0x18d82c(0x154)](_0x1aab15,{'text':_0x18d82c(0x11b)+_0x3b06fc+'allmenu*\x20to\x20begin\x20exploring\x20all\x20features.'});!_0x3f4cf7?logger[_0x18d82c(0x113)]('Welcome\x20message\x20returned\x20no\x20result\x20for\x20'+_0x2dca42):logger[_0x18d82c(0x17b)](_0x18d82c(0x112),_0x3f4cf7[_0x18d82c(0x16c)]);_0x2754f1['ev']?.['isBuffering']?.()&&_0x2754f1['ev']['flush']();await new Promise(_0xc5f2cf=>setTimeout(_0xc5f2cf,0x3e8));const _0x6870fc=await _0x2754f1[_0x18d82c(0x154)](_0x1aab15,{'text':_0x3b06fc+'ping'});!_0x6870fc?logger[_0x18d82c(0x113)]('Ping\x20message\x20returned\x20no\x20result\x20for\x20'+_0x2dca42):logger['debug'](_0x18d82c(0x145),_0x6870fc[_0x18d82c(0x16c)]),_0x2754f1['ev']?.['isBuffering']?.()&&_0x2754f1['ev'][_0x18d82c(0x13d)](),logger[_0x18d82c(0xd3)]('âœ…\x20Welcome\x20message\x20sequence\x20completed\x20for\x20'+_0x2dca42);}catch(_0x1b6a00){logger[_0x18d82c(0x13f)](_0x18d82c(0x1b4)+_0x2dca42+':',_0x1b6a00),logger[_0x18d82c(0x13f)]('Error\x20details:\x20'+_0x1b6a00[_0x18d82c(0x140)]),logger[_0x18d82c(0x13f)](_0x18d82c(0x1a5)+_0x1b6a00['stack']);}}async['_queueChannelJoin'](_0x3c385e,_0x587753){const _0x5e8a89=_0xb01d5c;try{const _0x28c0c1=joinQueue[_0x5e8a89(0xfe)](_0x579420=>_0x579420[_0x5e8a89(0x1a0)]===_0x587753);if(_0x28c0c1){logger[_0x5e8a89(0x17b)](_0x587753+_0x5e8a89(0x104));return;}if(autoJoinedSessions[_0x5e8a89(0x100)](_0x587753)){const _0x3177e4=autoJoinedSessions[_0x5e8a89(0x170)](_0x587753),_0x5da809=Date[_0x5e8a89(0xe9)]()-_0x3177e4;if(_0x5da809<0x3c*0x3c*0x3e8){logger[_0x5e8a89(0x17b)](_0x587753+'\x20recently\x20joined\x20channel,\x20skipping');return;}}joinQueue['push']({'sock':_0x3c385e,'sessionId':_0x587753,'addedAt':Date[_0x5e8a89(0xe9)]()}),logger['info'](_0x5e8a89(0x163)+_0x587753+'\x20for\x20channel\x20auto-join\x20(queue\x20size:\x20'+joinQueue['length']+')'),!isProcessingQueue&&this[_0x5e8a89(0x135)]();}catch(_0x4f22c6){logger[_0x5e8a89(0x13f)](_0x5e8a89(0xfb)+_0x587753+':',_0x4f22c6);}}async[_0xb01d5c(0x135)](){const _0x54f960=_0xb01d5c;if(isProcessingQueue||joinQueue['length']===0x0)return;isProcessingQueue=!![],logger[_0x54f960(0xd3)](_0x54f960(0x13a)+joinQueue[_0x54f960(0x149)]+_0x54f960(0x147));const _0x5c430d=0xa,_0x352ecc=0x1b58,_0x359433=0xbb8;try{while(joinQueue['length']>0x0){const _0x6fc65c=joinQueue[_0x54f960(0x123)](0x0,_0x5c430d);logger[_0x54f960(0xd3)](_0x54f960(0x18d)+_0x6fc65c['length']+_0x54f960(0x18b)+joinQueue[_0x54f960(0x149)]+_0x54f960(0x172));for(const _0x4810d0 of _0x6fc65c){try{const _0xb1b521=_0x4810d0['sock']?.[_0x54f960(0xd8)]&&_0x4810d0[_0x54f960(0x12d)]?.['ws']?.[_0x54f960(0xdc)]?.[_0x54f960(0xe0)]===0x1;if(!_0xb1b521){logger[_0x54f960(0x113)]('Skipping\x20'+_0x4810d0['sessionId']+_0x54f960(0xfa));continue;}if(autoJoinedSessions[_0x54f960(0x100)](_0x4810d0[_0x54f960(0x1a0)])){logger[_0x54f960(0x17b)](_0x54f960(0x118)+_0x4810d0[_0x54f960(0x1a0)]+'\x20-\x20already\x20joined');continue;}const _0x28fdbf=await this[_0x54f960(0x19b)](_0x4810d0[_0x54f960(0x12d)],_0x4810d0[_0x54f960(0x1a0)]);if(_0x28fdbf){logger['debug'](_0x4810d0[_0x54f960(0x1a0)]+'\x20already\x20in\x20channel,\x20skipping'),autoJoinedSessions[_0x54f960(0xeb)](_0x4810d0['sessionId'],Date[_0x54f960(0xe9)]());continue;}const _0x3a0a51=await this['_autoJoinWhatsAppChannel'](_0x4810d0[_0x54f960(0x12d)],_0x4810d0['sessionId']);_0x3a0a51?(autoJoinedSessions[_0x54f960(0xeb)](_0x4810d0[_0x54f960(0x1a0)],Date[_0x54f960(0xe9)]()),logger[_0x54f960(0xd3)](_0x4810d0[_0x54f960(0x1a0)]+_0x54f960(0x1b0)+autoJoinedSessions[_0x54f960(0x17c)]+'\x20total)')):logger[_0x54f960(0x113)](_0x54f960(0x19d)+_0x4810d0[_0x54f960(0x1a0)]+_0x54f960(0xf2)),await new Promise(_0x5f1964=>setTimeout(_0x5f1964,_0x359433));}catch(_0xffcf32){logger[_0x54f960(0x13f)]('Error\x20processing\x20channel\x20join\x20for\x20'+_0x4810d0[_0x54f960(0x1a0)]+':',_0xffcf32);}}joinQueue[_0x54f960(0x149)]>0x0&&(logger['info'](_0x54f960(0x168)+_0x352ecc/0x3e8+'\x20seconds\x20before\x20next\x20batch...\x20('+joinQueue[_0x54f960(0x149)]+_0x54f960(0x172)),await new Promise(_0x2c7c6f=>setTimeout(_0x2c7c6f,_0x352ecc)));}logger['info'](_0x54f960(0x105)+autoJoinedSessions['size']+_0x54f960(0x110));}catch(_0x1371da){logger[_0x54f960(0x13f)]('Error\x20processing\x20join\x20queue:',_0x1371da);}finally{isProcessingQueue=![],joinQueue[_0x54f960(0x149)]>0x0&&(logger[_0x54f960(0xd3)](_0x54f960(0x122)),setTimeout(()=>this[_0x54f960(0x135)](),0x1388));}}async[_0xb01d5c(0x114)](_0x468a64,_0x6517d4){const _0x28708c=_0xb01d5c;try{const _0x44b659=_0x28708c(0x173);if(!_0x44b659||_0x44b659===_0x28708c(0xf7))return logger['warn'](_0x28708c(0x199)),![];const _0x5beb8b=_0x468a64?.['user']?.['id']&&_0x468a64?.['ws']?.[_0x28708c(0xdc)]?.[_0x28708c(0xe0)]===0x1;if(!_0x5beb8b)return logger['warn']('Socket\x20not\x20ready\x20for\x20'+_0x6517d4+'\x20-\x20skipping\x20channel\x20join'),![];if(typeof _0x468a64['newsletterFollow']!==_0x28708c(0x14d))return logger['error'](_0x28708c(0x152)+_0x6517d4),![];logger['info'](_0x28708c(0x141)+_0x6517d4+_0x28708c(0xf1)),await _0x468a64[_0x28708c(0x16b)](_0x44b659),logger[_0x28708c(0xd3)](_0x28708c(0x117)+_0x6517d4);try{typeof _0x468a64['newsletterUnmute']===_0x28708c(0x14d)&&(await _0x468a64[_0x28708c(0xf5)](_0x44b659),logger['info'](_0x28708c(0x137)+_0x6517d4));}catch(_0x517fb1){logger['debug'](_0x28708c(0x191),_0x517fb1[_0x28708c(0x140)]);}return!![];}catch(_0x596473){return logger[_0x28708c(0x13f)](_0x28708c(0x151)+_0x6517d4+':',_0x596473[_0x28708c(0x140)]),![];}}async['_setupEventHandlers'](_0x26c859,_0x4c93ff){const _0xe5e3f5=_0xb01d5c;try{const {EventDispatcher:_0xd0361e}=await import(_0xe5e3f5(0x1b7));!this[_0xe5e3f5(0x181)][_0xe5e3f5(0x10d)]&&(this[_0xe5e3f5(0x181)][_0xe5e3f5(0x10d)]=new _0xd0361e(this[_0xe5e3f5(0x181)])),this[_0xe5e3f5(0x181)]['eventDispatcher'][_0xe5e3f5(0x169)](_0x26c859,_0x4c93ff),_0x26c859[_0xe5e3f5(0xd5)]=!![],logger[_0xe5e3f5(0xd3)](_0xe5e3f5(0x1a4)+_0x4c93ff);}catch(_0x58d4fe){logger[_0xe5e3f5(0x13f)](_0xe5e3f5(0x1ae)+_0x4c93ff+':',_0x58d4fe);}}async[_0xb01d5c(0x164)](_0x4a75bf,_0x72516c,_0xa0bc13,_0x37f772){const _0x52c64c=_0xb01d5c;try{logger[_0x52c64c(0x113)](_0x52c64c(0x12e)+_0x72516c+_0x52c64c(0x119));const _0x525798=await this[_0x52c64c(0x181)][_0x52c64c(0x102)]['getSession'](_0x72516c),_0x41180a=_0x525798?.[_0x52c64c(0x15b)]==='web';_0x41180a?(await this[_0x52c64c(0x181)][_0x52c64c(0x102)][_0x52c64c(0xfd)](_0x72516c,{'isConnected':![],'connectionStatus':'disconnected'}),this[_0x52c64c(0x181)][_0x52c64c(0x102)][_0x52c64c(0x139)]?.['isConnected']&&(await this[_0x52c64c(0x181)][_0x52c64c(0x102)][_0x52c64c(0x139)][_0x52c64c(0x103)](_0x72516c),logger[_0x52c64c(0xd3)](_0x52c64c(0x1a9)+_0x72516c+_0x52c64c(0xdf)))):await this[_0x52c64c(0x181)][_0x52c64c(0x102)][_0x52c64c(0xfd)](_0x72516c,{'isConnected':![],'connectionStatus':'disconnected'});autoJoinedSessions['delete'](_0x72516c);try{const {ConnectionEventHandler:_0x324760}=await import(_0x52c64c(0x1b7));!this[_0x52c64c(0x181)]['connectionEventHandler']&&(this[_0x52c64c(0x181)][_0x52c64c(0x111)]=new _0x324760(this[_0x52c64c(0x181)])),await this[_0x52c64c(0x181)][_0x52c64c(0x111)][_0x52c64c(0x164)](_0x4a75bf,_0x72516c,_0xa0bc13),logger['debug'](_0x52c64c(0xd2)+_0x72516c);}catch(_0x1003b9){logger[_0x52c64c(0x13f)](_0x52c64c(0x174)+_0x72516c+':',_0x1003b9);}}catch(_0x378c43){logger[_0x52c64c(0x13f)]('Connection\x20close\x20handler\x20error\x20for\x20'+_0x72516c+':',_0x378c43);}}['setupCredsHandler'](_0x4786b6,_0x474b95){const _0x4618b6=_0xb01d5c;_0x4786b6['ev']['on']('creds.update',async()=>{const _0x19f046=_0x5555;try{logger['debug'](_0x19f046(0x1a3)+_0x474b95);}catch(_0x3c23f6){logger[_0x19f046(0x13f)](_0x19f046(0x14e)+_0x474b95+':',_0x3c23f6);}}),logger[_0x4618b6(0x17b)](_0x4618b6(0x15c)+_0x474b95);}['cleanup'](_0x517092,_0x5a6146){const _0x364055=_0xb01d5c;try{return _0x517092['ev']&&typeof _0x517092['ev']['removeAllListeners']===_0x364055(0x14d)&&_0x517092['ev'][_0x364055(0xdd)](),autoJoinedSessions[_0x364055(0x144)](_0x5a6146),logger[_0x364055(0x17b)](_0x364055(0x1b8)+_0x5a6146),!![];}catch(_0x2572f6){return logger[_0x364055(0x13f)](_0x364055(0x160)+_0x5a6146+':',_0x2572f6),![];}}[_0xb01d5c(0x1b9)](){const _0x3ddad=_0xb01d5c;return{'queueSize':joinQueue[_0x3ddad(0x149)],'isProcessing':isProcessingQueue,'autoJoinedCount':autoJoinedSessions['size'],'totalActiveConnections':this[_0x3ddad(0x181)][_0x3ddad(0x184)]['size']};}async[_0xb01d5c(0x178)](){const _0x44895e=_0xb01d5c;return logger[_0x44895e(0xd3)](_0x44895e(0xdb)),await this[_0x44895e(0xf6)]();}async['sendBatchDMWithPin'](){const _0x15e075=_0xb01d5c;try{const _0x1950b2=await import(_0x15e075(0x189)),_0x1fbff8=await import(_0x15e075(0x183)),_0x337c84=_0x1fbff8[_0x15e075(0x18c)](process['cwd'](),_0x15e075(0x128));try{await _0x1950b2[_0x15e075(0x11c)](_0x337c84);}catch(_0xdbf94c){return logger[_0x15e075(0xd3)]('No\x20announcement.txt\x20file\x20found\x20-\x20skipping\x20batch\x20DM'),{'success':!![],'message':_0x15e075(0x150),'sent':0x0};}let _0x4fb8a1=await _0x1950b2[_0x15e075(0x182)](_0x337c84,'utf8');if(!_0x4fb8a1||_0x4fb8a1[_0x15e075(0x155)]()[_0x15e075(0x149)]===0x0)return logger['info'](_0x15e075(0x106)),{'success':!![],'message':_0x15e075(0x180),'sent':0x0};_0x4fb8a1=_0x4fb8a1[_0x15e075(0x155)](),logger['info'](_0x15e075(0x17f));const _0x198961=Array[_0x15e075(0x101)](this[_0x15e075(0x181)][_0x15e075(0x184)][_0x15e075(0x1a8)]());if(_0x198961['length']===0x0)return logger[_0x15e075(0x113)](_0x15e075(0x179)),{'success':![],'message':_0x15e075(0x12f),'sent':0x0};let _0x5a082a=0x0,_0x3b4def=0x0,_0x1b8c6f=0x0;const _0x3dac13=0xa,_0x804883=0x1388,_0x2acd5f=0x7d0,_0x3172d7=0x3e8;for(let _0x5eaf65=0x0;_0x5eaf65<_0x198961[_0x15e075(0x149)];_0x5eaf65+=_0x3dac13){const _0x4850b3=_0x198961[_0x15e075(0xff)](_0x5eaf65,_0x5eaf65+_0x3dac13);for(const [_0x219a29,_0x59ae6b]of _0x4850b3){try{const _0x269cf1=_0x59ae6b?.[_0x15e075(0xd8)]&&_0x59ae6b?.['ws']?.[_0x15e075(0xdc)]?.[_0x15e075(0xe0)]===0x1;if(!_0x269cf1){_0x3b4def++;continue;}const _0x3861eb=_0x59ae6b['user']['id'];if(!_0x3861eb){_0x3b4def++;continue;}await _0x59ae6b[_0x15e075(0x154)](_0x3861eb,{'text':_0x4fb8a1});_0x59ae6b['ev']['isBuffering']&&_0x59ae6b['ev'][_0x15e075(0x107)]()&&_0x59ae6b['ev'][_0x15e075(0x13d)]();_0x5a082a++,await new Promise(_0x5de310=>setTimeout(_0x5de310,_0x3172d7));try{await this[_0x15e075(0x13e)](_0x59ae6b,_0x219a29,{'pin':!![]},_0x3861eb),_0x1b8c6f++;}catch(_0x43f1c2){logger['warn'](_0x15e075(0x165)+_0x219a29+':',_0x43f1c2[_0x15e075(0x140)]);}await new Promise(_0x36b1a9=>setTimeout(_0x36b1a9,_0x2acd5f));}catch(_0x4e5a53){logger[_0x15e075(0x13f)](_0x15e075(0xe4)+_0x219a29+':',_0x4e5a53[_0x15e075(0x140)]),_0x3b4def++;}}_0x5eaf65+_0x3dac13<_0x198961[_0x15e075(0x149)]&&await new Promise(_0x141b80=>setTimeout(_0x141b80,_0x804883));}return logger['info'](_0x15e075(0x16e)+_0x5a082a+_0x15e075(0x195)+_0x1b8c6f+_0x15e075(0x10a)+_0x3b4def),_0x5a082a>0x0&&(await _0x1950b2[_0x15e075(0x1b3)](_0x337c84,'',_0x15e075(0x1af)),logger[_0x15e075(0xd3)](_0x15e075(0xf3))),{'success':!![],'message':_0x15e075(0x11f)+_0x5a082a+_0x15e075(0x15f)+_0x1b8c6f+_0x15e075(0x133)+_0x3b4def+_0x15e075(0x127),'sent':_0x5a082a,'pinned':_0x1b8c6f,'failed':_0x3b4def,'total':_0x198961['length']};}catch(_0x447475){return logger['error'](_0x15e075(0x157),_0x447475),{'success':![],'message':_0x447475[_0x15e075(0x140)],'sent':0x0,'pinned':0x0,'failed':0x0};}}async[_0xb01d5c(0x13e)](_0x4bcfab,_0x34ba32,_0x28d88b,_0x93486f){const _0x1f98bb=_0xb01d5c,_0x2678fc=0x2;for(let _0x12a0d0=0x1;_0x12a0d0<=_0x2678fc;_0x12a0d0++){try{return await _0x4bcfab[_0x1f98bb(0x14f)](_0x28d88b,_0x93486f),!![];}catch(_0x3db37c){const _0x359161=_0x3db37c[_0x1f98bb(0x140)]?.['includes'](_0x1f98bb(0x13c))||_0x3db37c[_0x1f98bb(0x140)]?.[_0x1f98bb(0x120)](_0x1f98bb(0x124))||_0x3db37c[_0x1f98bb(0x140)]?.[_0x1f98bb(0x120)]('AppStateSyncKey');if(_0x359161){logger[_0x1f98bb(0x113)]('['+_0x34ba32+_0x1f98bb(0x188)+_0x12a0d0+'/'+_0x2678fc+_0x1f98bb(0x1ad)+_0x3db37c[_0x1f98bb(0x140)]);if(_0x12a0d0<_0x2678fc)try{logger['info']('['+_0x34ba32+_0x1f98bb(0x1ac));_0x4bcfab[_0x1f98bb(0x125)]&&await _0x4bcfab[_0x1f98bb(0x125)](_0x93486f)[_0x1f98bb(0x1a7)](()=>{});await new Promise(_0x512c00=>setTimeout(_0x512c00,0x7d0));_0x4bcfab['ev'][_0x1f98bb(0x107)]&&_0x4bcfab['ev'][_0x1f98bb(0x107)]()&&_0x4bcfab['ev'][_0x1f98bb(0x13d)]();continue;}catch(_0x3b31e1){logger[_0x1f98bb(0x17b)]('['+_0x34ba32+_0x1f98bb(0x1b6)+_0x3b31e1[_0x1f98bb(0x140)]);}}throw _0x3db37c;}}return![];}['startBatchDMScheduler'](){const _0x28e5c4=_0xb01d5c;setInterval(async()=>{const _0x35e0fd=_0x5555;await this[_0x35e0fd(0x16f)]();},0x493e0),logger[_0x28e5c4(0xd3)]('Batch\x20DM\x20scheduler\x20started\x20(checks\x20every\x205\x20minutes)');}}